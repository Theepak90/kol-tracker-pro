2025-07-11 11:41:43,133 - __main__ - INFO - API_ID: 28152923
2025-07-11 11:41:43,133 - __main__ - INFO - API_HASH: set
2025-07-11 11:41:43,133 - __main__ - INFO - SESSION_NAME: telegram_session
2025-07-11 11:41:43,133 - __main__ - INFO - MONGODB_URI: using default
2025-07-11 11:41:43,162 - __main__ - INFO - Starting FastAPI server...
INFO:     Started server process [8563]
INFO:     Waiting for application startup.
2025-07-11 11:41:43,172 - __main__ - INFO - Connecting to MongoDB...
2025-07-11 11:41:43,185 - __main__ - INFO - Connected to MongoDB successfully
2025-07-11 11:41:43,185 - __main__ - INFO - Creating Telegram client...
2025-07-11 11:41:43,187 - __main__ - INFO - Starting Telegram client...
2025-07-11 11:41:43,187 - telethon.network.mtprotosender - INFO - Connecting to 149.154.167.51:443/TcpFull...
2025-07-11 11:41:43,522 - telethon.network.mtprotosender - INFO - Connection to 149.154.167.51:443/TcpFull complete!
2025-07-11 11:41:44,764 - __main__ - ERROR - User not authorized. Please run the authentication script first.
2025-07-11 11:41:44,765 - __main__ - ERROR - Failed to start services: User not authorized
ERROR:    Traceback (most recent call last):
  File "/Users/theepak/.pyenv/versions/3.7.12/lib/python3.7/site-packages/starlette/routing.py", line 677, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/Users/theepak/.pyenv/versions/3.7.12/lib/python3.7/site-packages/starlette/routing.py", line 566, in __aenter__
    await self._router.startup()
  File "/Users/theepak/.pyenv/versions/3.7.12/lib/python3.7/site-packages/starlette/routing.py", line 654, in startup
    await handler()
  File "main.py", line 165, in startup_event
    await scanner.connect()
  File "main.py", line 95, in connect
    raise Exception("User not authorized")
Exception: User not authorized

ERROR:    Application startup failed. Exiting.
