name: Keep Render Services Alive

on:
  schedule:
    # Run every 10 minutes
    - cron: '*/10 * * * *'
  workflow_dispatch: # Allow manual trigger

jobs:
  keep-alive:
    runs-on: ubuntu-latest
    
    steps:
    - name: Ping Backend Service
      run: |
        echo "ğŸ“ Pinging backend service..."
        response=$(curl -s -o /dev/null -w "%{http_code}" https://kolnexus-backend.onrender.com/health)
        if [ $response -eq 200 ]; then
          echo "âœ… Backend is alive (HTTP $response)"
        else
          echo "âŒ Backend ping failed (HTTP $response)"
        fi
    
    - name: Ping Telethon Service  
      run: |
        echo "ğŸ“ Pinging telethon service..."
        response=$(curl -s -o /dev/null -w "%{http_code}" https://kolnexus-telethon.onrender.com/health)
        if [ $response -eq 200 ]; then
          echo "âœ… Telethon is alive (HTTP $response)"
        else
          echo "âŒ Telethon ping failed (HTTP $response)"
        fi
    
    - name: Summary
      run: |
        echo "ğŸ”„ Keep-alive check completed at $(date)"
        echo "Services should remain active for the next 10 minutes" 